@using Coldew.Api.UI;
@using Coldew.Api;
@using Coldew.Website;
@{
    ViewBag.Title = "发货申请单";
    Layout = "";
    MetadataInfo metadataInfo = this.Model;
    ColdewObjectInfo objectInfo = this.ViewBag.objectInfo;
    Dictionary<string, PropertyInfo> metadataPropertys = metadataInfo.Propertys.ToDictionary(x => x.Code);
    ColdewDetailsInput crmInput = WebHelper.ColdewInputFactory.CreateDetailsInput();
}
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link type="text/css" href='@this.Url.Content("~/css/smoothness/jquery-ui-1.8.23.custom.css")' rel="stylesheet" />
	<link type="text/css" href='@this.Url.Content("~/css/jquery-ui-datagrid.css")' rel="stylesheet" />
	<link type="text/css" href="@this.Url.Content("~/css/smoothness/jquery-ui-tree.css")" rel="stylesheet" />
    <link type="text/css" href="@this.Url.Content("~/css/bootstrap.min.css")" rel="stylesheet" />
	<link type="text/css" href='@this.Url.Content("~/css/default.css")' rel="stylesheet" />
	<script type="text/javascript" src='@this.Url.Content("~/js/jquery-1.8.0.min.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/jquery-ui-1.8.23.custom.min.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/jquery.json-2.3.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/jquery-validate.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/jquery.ui.datagrid.js")'></script>
	<script type="text/javascript" src="@this.Url.Content("~/js/jquery.ui.tree.js")"></script>
	<script type="text/javascript" src="@this.Url.Content("~/js/jquery.ui.pager.js")"></script>
	<script type="text/javascript" src="@this.Url.Content("~/js/jquery.ui.chengyuan.js")"></script>
	<script type="text/javascript" src="@this.Url.Content("~/js/chengyuanDialog.js")"></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/jianglaiZhipaiDialog.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/renwuSousuoPopover.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/liuchengtuDialog.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/bootstrap.min.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/jquery-extend.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/metadataSelectDialog.js")'></script>
	<script type="text/javascript" src='@this.Url.Content("~/js/metadataSelect.js")'></script>
    <!--[if IE]>
	    <script type="text/javascript" src='@this.Url.Content("~/js/placeholder.js")'></script>
    <![endif]-->
    <!--[if lt IE 9]>
	    <script type="text/javascript" src='@this.Url.Content("~/js/html5shiv.js")'></script>
    <![endif]-->
    <script language="javascript" type="text/javascript">
        $.baseUrl = "@this.Url.Content("~/")";
    </script>
</head>

<body>
      <h3 style="text-align:center">发货申请单</h3>
<form class="form-horizontal" id="baseInfoForm">
    <fieldset>
        <legend>基本信息</legend>
        <div class='row'>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("name"), metadataPropertys)
            </div>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("kehu"), metadataPropertys)
            </div>
        </div>
        <div class='row'>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("shengfen"), metadataPropertys)
            </div>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("diqu"), metadataPropertys)
            </div>
        </div>
        <div class='row'>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("huikuanRiqi"), metadataPropertys)
            </div>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("huikuanJine"), metadataPropertys)
            </div>
        </div>
        <div class='row'>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("fahuoRiqi"), metadataPropertys)
            </div>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("huikuanDanwei"), metadataPropertys)
            </div>
        </div>
        <div class='row'>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("kaipiaoDanwei"), metadataPropertys)
            </div>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("songhuoFangshi"), metadataPropertys)
            </div>
        </div>
        <div class='row'>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("shouhuoDizhi"), metadataPropertys)
            </div>
            <div class="col-md-6">
                @crmInput.Input(objectInfo.GetField("shouhuoren"), metadataPropertys)
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>产品信息</legend>
        <div style="padding-left: 80px;">
            <div id="chanpinGrid"></div>
        </div>
    </fieldset>
    <fieldset>
        <legend>备注信息</legend>
        @crmInput.Input(objectInfo.GetField("suihuoFudai"), metadataPropertys)
        @crmInput.Input(objectInfo.GetField("beizhu"), metadataPropertys)
    </fieldset>
    <fieldset>
        <legend>流程信息</legend>
            <div class="form-group" style="padding-left: 80px;">
                <div id="renwuGrid"></div>
            </div>
    </fieldset>
</form>


<script language="javascript" type="text/javascript">
var mobanId = '@this.Request["mobanId"]';
var renwuModels = @this.Html.Raw(this.ViewBag.renwuModelsJson);
var biaodan = @this.Html.Raw(this.ViewBag.biaodanJson);
var chanpinGrid = $("#chanpinGrid").datagrid({
		columns:[
			{title: "产品名称", width: 150, field:"name"},
			{title: "规格", width: 80, field:"guige"},
			{ title: "剂型", width: 50, field: "jixing" },
			{title: "生产企业", width: 150, field:"shengchanQiye"},
			{title: "单位", width: 30, field:"danwei"},
			{title: "总数量", width: 50, field:"zongshuliang"},
			{title: "出库单价", width: 60, field:"chukuDanjia"},
			{title: "总金额", width: 60, field:"zongjine"},
			{title: "件数", width: 50, field:"jianshu"}
		],
		canSort: false,
		singleSelect: true,
		showNumberRow: false,
        height: 150
	});
    
chanpinGrid.datagrid("option", "data", biaodan.chanpinList);

var renwuGrid = $("#renwuGrid").datagrid({
		columns:[
			{title: "步骤名", width: 100, field:"mingcheng"},
			{title: "处理人", width: 80, field:"chuliren"},
			{title: "状态", width: 60, field:"zhuangtaiMingcheng"},
			{title: "开始时间", width: 150, field:"kaishiShijian"},
			{title: "完成时间", width: 150, field:"wanchengShijian"},
			{title: "备注", width: 200, field:"wanchengShuoming"}
		],
		canSort: false,
		singleSelect: true,
		showNumberRow: false
	});

renwuGrid.datagrid("option", "data", renwuModels);
</script>


</body>
</html>


