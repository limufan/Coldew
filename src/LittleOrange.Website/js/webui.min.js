jQuery(function(a){a.datepicker.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3c;上月",nextText:"下月&#x3e;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1},a.datepicker.setDefaults(a.datepicker.regional["zh-CN"])}),jQuery.fn.extend({inputing:function(a,b){b||(b=300);var c=null;this.keyup(function(){null!=c&&clearTimeout(c),c=setTimeout(a,b)})},horizontalForm:function(){this.find(".form-group").each(function(){var a=$(this),b=a.parent().width(),c=a.find(".control-label").outerWidth();a.find(".control-input").outerWidth(b-c)})}}),jQuery.extend({resolveUrl:function(a,b){var c="";return b&&(c=$.param(b)),a.indexOf("?")>-1?$.baseUrl+a+c:$.baseUrl+a+"?"+c},toJSON:function(a){return JSON.stringify(a)},formatDate:function(a){if(!a)return"";if("string"==typeof a)return a.split("T")[0];if("object"==typeof a){var b=a.getFullYear().toString(),c=a.getMonth()+1,d=a.getDate();return b+c+d}return""},toISODate:function(a){if(!a)return"";if("string"==typeof a)return a+"T00:00:00";if("object"==typeof a){var b=a.getFullYear().toString(),c=a.getMonth()+1,d=a.getDate();return b+c+d+"T00:00:00"}return""}}),$.ajaxSetup({cache:!1}),Array.prototype.find=function(a){var b;return $.each(this,function(){return a(this)?(b=this,!1):void 0}),b},Array.prototype.sum=function(a){var b,c=0;return $.each(this,function(){b=a(this),$.isNumeric(b)&&(c+=a(this))}),c.toFixed(2)},String.prototype.format=function(){var a=Array.prototype.slice.call(arguments);1===a.length&&"object"==typeof a[0]&&(a=a[0]);for(var b,c=this,d=0;b=/\${(\d+|\w+)?}/gm.exec(c);d++){var e=b[1];c=e?c.replace(new RegExp("\\$\\{"+e+"\\}","gm"),a[e]):c.replace("{}",a[d])}return c.toString()},function(a){a.widget("webui.input",{options:{},_create:function(){var a=this;this._name=this.options.name||this.element.attr("name"),this._defaultValue=this.options.defaultValue||this.element.data("defaultValue"),this._required=this.options.required||this.element.data("required"),this._readonly=this.options.readonly||this.element.data("readonly"),this._validator=this.options.validator||this.element.data("validator"),this._createTextElement(),this._createMessagePopover(),this._onCreated(),this.element.is(":input")&&this.element.change(function(){a._changed()}),this.reset()},_createTextElement:function(){this._textElement=a('<p style="display: none" class="form-control-static"></p>'),this.element.after(this._textElement)},_createMessagePopover:function(){this.element.popover({content:"",placement:"right",trigger:"manual",container:"body"})},_onCreated:function(){},reset:function(){this.setValue(this._defaultValue),this.setReadonly(this._readonly)},_changed:function(){this.validate();var a=this.getValue();this._trigger("changed",null,a)},changed:function(a){var b=this;this.element.bind((this.widgetEventPrefix+"changed").toLowerCase(),function(c,d){a(b,d)})},inputing:function(a,b){var c=this;this.element.inputing(function(){var b=c.getValue();a(c,b)},b)},getName:function(){return this._name},setError:function(a,b){a?this.element.closest(".form-group").addClass("has-error"):this.element.closest(".form-group").removeClass("has-error"),b?this.element.attr("data-content",b).popover("show"):this.element.popover("hide")},_validateRequired:function(a){var b={valid:!0,message:null};return this._required&&!a&&(b.valid=!1),b},_validateValidator:function(a){var b={valid:!0,message:null};return this._validator&&(b=window[this._validator](a)),b},validate:function(){var a=this.getValue(),b=null;return b=this._validateRequired(a),b.valid&&(b=this._validateValidator(a)),this.setError(!b.valid,b.message),b.valid},focus:function(){"none"!==this.element.css("display")&&this.element.focus()},setDefaultValue:function(a){this._defaultValue=a},getDefaultValue:function(){return this._defaultValue},setValue:function(a){this.element.val(a),this._textElement.html(a)},getValue:function(){var a=this.element.val();return jQuery.trim(a)},setRequired:function(a){this._required=a},getRequired:function(){return this._required},setReadonly:function(a){this._readonly=a;var b=this.getValue();this.setValue(b),this._readonly?(this._textElement.show(),this.element.hide()):(this._textElement.hide(),this.element.show())},getReadonly:function(){return this._readonly}})}(jQuery),function(a){a.widget("webui.textbox",a.webui.input,{options:{required:!1,suggestions:null,name:null,defaultValue:null},_onCreated:function(){var a=this.options.regex||this.element.data("regex");this._regexMessage=this.options.regexMessage||this.element.data("regexMessage"),this._suggestions=this.options.suggestions||this.element.data("suggestions"),this._suggestions&&this._createSuggestion(),a&&(this._regex=new RegExp(a))},_createSuggestion:function(){function b(a){return a.split(d)}function c(a){return b(a).pop()}var d=/[,，、\\；;]\s*/,e=/[,，、\\；;]$/,f=this._suggestions;this.element.autocomplete({source:function(b,d){d(a.ui.autocomplete.filter(f,c(b.term)))},focus:function(){return!1},minLength:0,select:function(b,c){var d=a(this).val();return a(this).val(e.test(d)?d+c.item.value:c.item.value),!1}}).click(function(){a(this).autocomplete("search","")})}})}(jQuery),function(a){a.widget("webui.dateInput",a.webui.input,{options:{required:!1,name:null,defaultValue:null},_onCreated:function(){this.element.datepicker()},getValue:function(){var b=this.element.val();return b?a.toISODate(b):null},setValue:function(b){var c=a.formatDate(b);this.element.val(c),this._textElement.html(c)}})}(jQuery),function(a){a.widget("webui.checkboxList",a.webui.input,{_onCreated:function(){var a=this;this.element.click(function(){a._changed()})},getValue:function(){var b=this.element.find(":checked").map(function(){return a(this).val()}).get();return b.length?b:null},setValue:function(b){b?(this.element.find("input").each(function(){var c=a.inArray(a(this).val(),b);a(this).prop("checked",c>-1)}),this._textElement.html(b.toString())):(this.element.find("input").each(function(){a(this).prop("checked",!1)}),this._textElement.html(""))},setReadonly:function(a){this._readonly=a,this.element.find("input").prop("disabled",a)}})}(jQuery),function(a){a.widget("webui.dateRangeInput",a.webui.input,{_onCreated:function(){var a,b=this;a=this.element.find("input"),this._startInput=a.eq(0).dateInput().data("dateInput"),this._endInput=a.eq(1).dateInput().data("dateInput"),a.change(function(){b._changed()})},validate:function(){var a=this.getValue(),b=null;return b=this._validateRequired(a),b.valid&&(b=this._validateValidator(a)),b.valid&&(b=this._validateRange(a)),this.setError(!b.valid,b.message),b.valid},_validateRange:function(a){var b={valid:!0,message:null};return a&&a.start&&a.end&&a.start>a.end&&(b.valid=!1,b.message="最小值不能大于最大值"),b},focus:function(){this._startInput.focus()},getValue:function(){var a=this._startInput.getValue(),b=this._endInput.getValue();return a||b?{start:a,end:b}:null},setValue:function(b){var c=null,d=null;b&&(c=b.start,d=b.end),this._startInput.setValue(c),this._endInput.setValue(d),c=a.formatDate(c),d=a.formatDate(d),this._textElement.html(c+" - "+d)}})}(jQuery),function(a){a.widget("webui.form",{options:{sections:null},_create:function(){var b=this;this._inputs={},a.each(a.webui.form.inputTypes,function(){var c,d,e;c=this.typeName,d=a(this.selector)[c](),d.each(function(){e=a(this).data(c),b._inputs[e.getName()]=e})})},getValue:function(){var b={};return a.each(this._inputs,function(a,c){b[a]=c.getValue()}),b},setValue:function(a){for(var b in a)b in this._inputs&&this._inputs[b].setValue(a[b])},setReadonly:function(b){a.each(this._inputs,function(a,c){c.setReadonly(b)})},reset:function(b){a.each(this._inputs,function(a,c){c.reset(b)})},validate:function(){var b=[];return a.each(this._inputs,function(a,c){c.validate()||b.push(c)}),b.length>0?(b[0].focus(),!1):!0},getInput:function(a){return this._inputs[a]},setInput:function(a,b){this._inputs[a]=b},changed:function(b){a.each(this._inputs,function(a,c){c.changed(function(a,c){b(a,c)})})},inputing:function(b,c){a.each(this._inputs,function(a,d){d.inputing(function(a,c){b(a,c)},c)})}}),a.webui.form.inputTypes=[{typeName:"checkboxList",selector:".webui-checkboxList"},{typeName:"dateInput",selector:".webui-dateInput"},{typeName:"dateRangeInput",selector:".webui-dateRangeInput"},{typeName:"numberInput",selector:".webui-numberInput"},{typeName:"numberRangeInput",selector:".webui-numberRangeInput"},{typeName:"radioList",selector:".webui-radioList"},{typeName:"simpleSelect",selector:".webui-simpleSelect"},{typeName:"textarea",selector:".webui-textarea"},{typeName:"textbox",selector:".webui-textbox"},{typeName:"complexSelect",selector:".webui-complexSelect"}]}(jQuery),function(a){a.widget("webui.numberInput",a.webui.input,{options:{required:null,name:null,max:null,min:null,precision:null,defaultValue:null},_onCreated:function(){this._precision=this.options.precision||this.element.data("precision"),this._max=this.options.max||this.element.data("max"),this._min=this.options.min||this.element.data("min"),this._numberRegex=new RegExp(this._precision>0?"^[-,+]?[0-9]+(.[0-9]{0,${0}})?$".format(this._precision):"^[-,+]?[0-9]*[1-9][0-9]*$")},validate:function(){var b=a.trim(this.element.val()),c=null;return c=this._validateRequired(b),c.valid&&(c=this._validateValidator(b)),c.valid&&(c=this._validateFormat(b)),c.valid&&(c=this._validateRange(b)),this.setError(!c.valid,c.message),c.valid},_validateFormat:function(a){var b={valid:!0,message:null};return a&&(this._numberRegex.test(a)||(b.valid=!1,b.message="格式错误！")),b},_validateRange:function(a){var b={valid:!0,message:null};return a&&(a=parseFloat(a),(a>this._max||a<this._min)&&(b.valid=!1,b.message="不能超出范围:"+this._min+"-"+this._max)),b},getValue:function(){var b=this.element.val();return b=parseFloat(b),a.isNumeric(b)?b:null},setValue:function(b){var c="";b=parseFloat(b),c=a.isNumeric(b)?b.toFixed(this._precision):"",this.element.val(c),this._textElement.html(c)}})}(jQuery),function(a){a.widget("webui.numberRangeInput",a.webui.input,{options:{required:null,name:null,defaultValue:null},_onCreated:function(){var a,b=this;a=this.element.find("input"),this._minInput=a.eq(0),this._maxInput=a.eq(1),a.change(function(){b._changed()})},validate:function(){var a=this.getValue(),b=null;return b=this._validateRequired(a),b.valid&&(b=this._validateValidator(a)),b.valid&&(b=this._validateRange(a)),this.setError(!b.valid,b.message),b.valid},_validateRange:function(a){var b={valid:!0,message:null};return a&&a.min>a.max&&(b.valid=!1,b.message="最小值不能大于最大值"),b},focus:function(){"none"!==this._minInput.css("display")&&this._minInput.focus()},getValue:function(){var b=this._minInput.val(),c=this._maxInput.val();return b=this._parseFloat(b),c=this._parseFloat(c),a.isNumeric(b)||a.isNumeric(c)?{min:b,max:c}:null},setValue:function(b){var c="",d="";b&&(c=a.isNumeric(b.min)?b.min:"",d=a.isNumeric(b.max)?b.max:""),this._minInput.val(c),this._maxInput.val(d),this._textElement.html(c.toString()+" - "+d.toString())},_parseFloat:function(b){return b=parseFloat(b),a.isNumeric(b)?b:null}})}(jQuery),function(a){a.widget("webui.radioList",a.webui.input,{_onCreated:function(){var a=this;this.element.click(function(){a._changed()})},getValue:function(){var a=this.element.find(":checked");return a.length?a.eq(0).val():null},setValue:function(b){this.element.find("input").each(function(){b&&a(this).val()===b.toString()&&a(this).prop("checked",!0)}),this._textElement.html(b),b?(b=b.toString(),this.element.find("input").each(function(){a(this).val()===b&&a(this).prop("checked",!0)}),this._textElement.html(b)):(this.element.find("input").each(function(){a(this).prop("checked",!1)}),this._textElement.html(""))},setReadonly:function(a){this._readonly=a,this.element.find("input").prop("disabled",a)}})}(jQuery),function(a){a.widget("webui.textarea",a.webui.input,{setValue:function(a){null!==a&&void 0!==a?(a=a.toString(),this.element.val(a),a=a.replace(/\n/g,"</br>"),this._textElement.html(a)):(this.element.val(""),this._textElement.html(""))}})}(jQuery),function(a){var b={"int":function(b){a.isNumeric(b)&&cell.text(b.toFixed(0))},number1:function(b){a.isNumeric(b)&&cell.text(b.toFixed(1))},number2:function(b){a.isNumeric(b)&&cell.text(b.toFixed(2))},number3:function(b){a.isNumeric(b)&&cell.text(b.toFixed(3))},number4:function(b){a.isNumeric(b)&&cell.text(b.toFixed(4))},number5:function(b){a.isNumeric(b)&&cell.text(b.toFixed(5))}},c=100;a.widget("webui.datagrid",a.webui.input,{_headerCells:null,_rows:null,options:{columns:null,singleSelect:!1,width:null,height:null,data:null,showNumberColumn:!1,name:null,defaultValue:null,required:!1,readonly:!1,hideHeader:!1,bordered:!0,textWrap:!1},_onCreated:function(){this._defaultValue=this.options.data,this._footer=this.options.footer;var b,c,d,e,f=this;this._headerCells=[],this._rows=[],this.element.addClass("ui-datagrid"),null!==this.options.columns&&this.options.columns.length&&(b=this._header=a("<div class='ui-datagrid-header'><div class='ui-datagrid-header-content'><table class='table table-bordered'><thead><tr></tr></thead></table></div></div>"),this.element.append(b),c=this._headerContent=b.children(".ui-datagrid-header-content"),d=this._body=a("<div class='ui-datagrid-body'><div class='ui-datagrid-body-content'><table class='table table-bordered table-hover'></table></div></div>"),e=this._bodyContent=d.find("table"),d.scroll(function(){b.scrollLeft(a(this).scrollLeft())}),this.element.append(d),this.options.bordered||this.element.find("table").removeClass("table-bordered"),this.element.addClass(this.options.textWrap?"wrap":"ellipsis"),this.options.hideHeader||this._renderHeader(),this._renderWidth(),this._renderHeight(),a(window).resize(function(){f._renderWidth(),f._renderHeight()}))},_renderHeader:function(){this._renderHeaderNumberCell(),this._renderHeaderCheckboxCell(),this._renderHeaderCells()},_renderHeaderNumberCell:function(){if(this._header.find(".ui-datagrid-header-numbercell").remove(),this.options.showNumberColumn){var b=a("<th class='ui-datagrid-header-numbercell' ><div class='ui-datagrid-header-cell'></div></th>");this._header.find("tr").append(b)}},_renderHeaderCheckboxCell:function(){var b,c=this;this._header.find(".ui-datagrid-header-checkbox-cell").remove(),this.options.singleSelect||(b=a("<th class='ui-datagrid-header-checkbox-cell' ><div class='ui-datagrid-header-cell'><input type='checkbox'/></div></th>"),b.click(function(b){c._onHeaderCheckboxCell_click(a(this)),b.stopPropagation()}),this._header.find("tr").append(b))},_renderHeaderCells:function(){var b,c=this;this._headerCells&&this._headerCells.length&&a.each(this._headerCells,function(){a(this.element).remove()}),b=c._getHeight(),this._headerCells=[],a.each(this.options.columns,function(d,e){var f,g,h,i,j;f=a("<div class='ui-datagrid-header-cell'></div>"),"desc"===e.sortDirection?f.append("<span class='ui-datagrid-header-sort-icon'>▼</span>"):"asc"===e.sortDirection&&f.append("<span class='ui-datagrid-header-sort-icon'>▲</span>"),f.append("<span class='ui-datagrid-header-title'>"+e.title+"</span>"),g=a("<th></th>").append(f),c._header.find("tr").append(g),h=c._header.find("th").index(g),i=f.outerHeight(),f.resizable({handles:"e",helper:"ui-datagrid-resize-helper",resize:function(a,c){c.helper.css("height",b)},start:function(){b=c._getHeight()},stop:function(a,b){b.originalElement.css("height","auto"),c._header.find("colgroup").find("col").eq(h).css("width",b.size.width),c._body.find("colgroup").find("col").eq(h).css("width",b.size.width),f.css("width",b.size.width)}}),j={element:g,column:e},c._headerCells.push(j),f.click(function(){c.options.canSort&&c.sortBy(e.name,c._toggleDirection(e.sortDirection))})})},_toggleDirection:function(a){return"desc"===a?"asc":"desc"},sortBy:function(b,c){var d,e;d=a.grep(this._headerCells,function(a){return a.column.name===b}),d&&d.length&&(this._header.find(".ui-datagrid-header-sort-icon").remove(),e=d[0],e.column.sortDirection=c,"desc"===c?e.element.find(".ui-datagrid-header-cell").append("<span class='ui-datagrid-header-sort-icon'>▼</span>"):"asc"===c&&e.element.find(".ui-datagrid-header-cell").append("<span class='ui-datagrid-header-sort-icon'>▲</span>"),this._trigger("sort",null,b+" "+c))},_renderHeight:function(){var a,b=this._getHeight();b&&(a=this._header.height(),b>=a&&this._body.height(b-a))},_getHeight:function(){var b,c,d,e;return"auto"===this.options.height?(c=a(window).height(),d=a(document.body).innerHeight()-a(document.body).height(),e=this.element.parent().height()-this.element.height(),b=c-e-d):this.options.height&&(b=this.options.height),b},_renderWidth:function(){if(this.options.width){this._header.css("width",this.options.width),this._body.css("width",this.options.width),this._headerContent.css("width",this.options.width);var a=this._headerContent.find("table").width();this._headerContent.width()<a+30&&this._headerContent.width(a+30)}var b=this._getColgroup();this._header.find("colgroup").remove(),this._body.find("colgroup").remove(),this._header.find("table").prepend(b),this._body.find("table").prepend(b)},_getColgroup:function(){var b,d="";this.options.showNumberColumn&&(d+="<col style='width: 30px'>"),this.options.singleSelect||(d+="<col style='width: 30px'>");var e=this._header.width();return a.each(this.options.columns,function(f,g){a.isNumeric(g.width)?b=g.width:/%$/.test(g.width)?(b=g.width,b=.01*parseInt(g.width)*e):b=c,d+="<col style='width: "+b+"px'>"}),"<colgroup>"+d+"</colgroup>"},_renderBody:function(){var b=this;a.each(this._rows,function(a,c){b.deleteRow(c)}),this._rows=[],this.options.data&&this.options.data.length&&a.each(this.options.data,function(a,c){b.appendRow(c)}),this._renderFooter()},_getRowTemplate:function(){var b=a("<tr></tr>");return this.options.showNumberColumn&&a("<td></td>").attr("column-name","number").appendTo(b),this.options.singleSelect||a("<td></td>").attr("column-name","checkbox").appendTo(b),a.each(this.options.columns,function(c,d){a("<td></td>").attr("column-name",d.name).appendTo(b)}),b},_renderFooter:function(){var b,c,d,e,f,g,h,i=this;if(this._footerElement&&this._footerElement.remove(),h=this.getValue(),h.length&&this._footer&&this._footer.length){g=this._getRowTemplate(),this._footerElement=a("<tfoot></tfoot>").append(g).appendTo(this._bodyContent),a.each(this._footer,function(){switch(b=this,b.valueType){case"sum":f=i.options.columns.find(function(a){return a.name==b.columnName}),c=h.sum(function(a){return a[f.field]});break;case"fixed":c=b.value}if(d=g.find("td[column-name='"+b.columnName+"']").text(c),b.colspan){for(e=b.colspan;e>1;)d.next().eq(0).remove(),e-=1;d.attr("colspan",b.colspan)}});for(var j=0;j<this._footer.length;j++);}},setFooter:function(a){this._footer=a,this._renderFooter()},appendRow:function(b){var c,d=this;c=a("<tr></tr>").appendTo(this._bodyContent),c.datarow({columns:this.options.columns,showNumberCell:this.options.showNumberColumn,showCheckboxCell:!this.options.singleSelect,data:b}).bind("datarowselected",function(a,b){d._onDatarow_selected(b)}).bind("datarowunselected",function(a,b){d._onDatarow_unselected(b)}).bind("datarowchanged",function(){d._changed()}),this._rows.push(c),this._refreshNumberRow(),this._trigger("addedRow",null,{row:c,data:b}),this._changed()},afterRow:function(b,c){var d,e=this;return d=a("<tr></tr>"),c.after(d),d.datarow({columns:this.options.columns,showNumberCell:this.options.showNumberColumn,showCheckboxCell:!this.options.singleSelect,data:b}).bind("datarowselected",function(a,b){e._onDatarow_selected(b)}).bind("datarowunselected",function(a,b){e._onDatarow_unselected(b)}).bind("datarowchanged",function(){e._changed()}),this._rows.push(d),this._refreshNumberRow(),this._trigger("addedRow",null,{row:d,data:b}),this._changed(),d},_changed:function(){this._renderFooter();var a=this.getValue();this._trigger("changed",null,a)},_onDatarow_selected:function(a){this._bodyContent.find(".active").length===this._rows.length&&this._header.find(".ui-datagrid-header-checkbox-cell input").attr("checked","checked"),this._trigger("selectedRow",null,a)},_onDatarow_unselected:function(a){this._header.find(".ui-datagrid-header-checkbox-cell input").removeAttr("checked"),this._trigger("unselectedRow",null,a)},_onHeaderCheckboxCell_click:function(a){a.find("input").prop("checked")?this.selectAllRow():this.unselectAllRow()},selectAllRow:function(){a.each(this._rows,function(a,b){b.datarow("select")})},unselectAllRow:function(){a.each(this._rows,function(a,b){b.datarow("unselect")})},_refreshNumberRow:function(){if(this.options.showNumberColumn)for(var a=this._bodyContent.find("tr td:first-child"),b=0;b<a.length;b++)a.eq(b).text(b+1)},getRows:function(){return this._rows},getRowsData:function(){return a.map(this._rows,function(a){return a.datarow("getValue")})},deleteSelectedRows:function(){var b,c=this;b=this.getSelectedRows(),a.each(b,function(a,b){c.deleteRow(b)}),this._changed()},getSelectedRows:function(){var b=a.grep(this._rows,function(a){return a.datarow("isSelected")});return b},getSelectedRow:function(){var a=this.getSelectedRows();return a&&a.length?a[0]:null},deleteRow:function(b){if("number"==typeof b&&(b=this._rows[b]),b){var c,d=this,e=[];a.each(this._rows,function(a,f){f!==b?e.push(f):(c=f.datarow("getValue"),f.remove(),d._trigger("deletedRow",null,c))}),this._rows=e,this._header.find(".ui-datagrid-header-checkbox-cell input").removeAttr("checked"),this._refreshNumberRow()}},setValue:function(a){this.options.data=a,this._renderBody()},getValue:function(){return this.getRowsData()},setReadonly:function(a){this._readonly=a},setColumns:function(a){this.options.columns=a,this._renderHeaderCells(),this._renderBody()},setSize:function(a){a.width&&(this.options.width=a.width,this._renderWidth()),a.height&&(this.options.height=a.height,this._renderHeight())}}),a.widget("webui.datarow",{_cells:null,_selected:null,options:{columns:null,showNumberCell:null,showCheckboxCell:null,data:null},_create:function(){var a=this;this._value=this.options.data,this._cells=[],this._selected=!1,this.element.click(function(){a._selected?a.unselect():a.select()}),this._render()},_render:function(){this.element.empty(),this._renderNumberCell(),this._renderCheckboxCell(),this._renderDataCells()},_renderDataCells:function(){var b,c,d=this,e=this.options.data;this._cells=[],a.each(this.options.columns,function(f,g){b={},b.column=g,c=a("<td class='ui-datagrid-cell'></td>"),d.element.append(c),b.element=c,d._renderCell(b,e),d._cells.push(b)})},_renderNumberCell:function(){if(this.options.showNumberCell){var b=a("<td class='ui-datagrid-numbercell'></td>");this.element.append(b)}},_renderCheckboxCell:function(){var b,c=this;this.options.showCheckboxCell&&(b=a("<td class='ui-datagrid-checkbox-cell'><input type='checkbox'/></td>"),b.click(function(b){a(b.target).is("input")||("checked"===a(this).find("input").attr("checked")?a(this).find("input").removeAttr("checked"):a(this).find("input").attr("checked","checked")),c._onCheckboxCell_click(a(this),c.element),b.stopPropagation()}),c.element.append(b))},_renderCell:function(a,c){var d,e=this,f=a.element,g=a.column,h=null;f.empty(),g.field&&c[g.field]&&(h=c[g.field]),"string"==typeof g.render?f.text(b[g.render](h)):g.render?(d=g.render(e.element,{data:c,value:h}),"string"==typeof d?f.html(d):"object"==typeof d&&f.append(d)):g.field&&f.html(h).attr("title",h)},_onCheckboxCell_click:function(a){"checked"===a.find("input").attr("checked")?this.select():this.unselect()},select:function(){this.options.showCheckboxCell&&this.element.find(".ui-datagrid-checkbox-cell input").prop("checked",!0),this.element.addClass("active"),this._selected=!0,this._trigger("selected",null,this.element)},unselect:function(){this.element.removeClass("active").find(".ui-datagrid-checkbox-cell input").prop("checked",!1),this._selected=!1,this._trigger("unselected",null,this.element)},setValue:function(b){var c=this;a.each(this._cells,function(a,d){c._renderCell(d,b)}),this._value=b,this._trigger("changed",null,this.element)},getValue:function(){return this._value},isSelected:function(){return this._selected}})}(jQuery),function(a){a.extend(a.webui.datagrid.prototype,{updateRow:function(a,b){this._rows[a]&&(this._rows[a].datarow("setValue",b),this._trigger("updatedRow",null,{row:this._rows[a],data:b}))},selectRow:function(a){this._rows[a]&&this._rows[a].datarow("select")},unselectRow:function(a){this._rows[a]&&this._rows[a].datarow("unselect")},_setOption:function(b,c){var d=this;switch(a.Widget.prototype._setOption.apply(d,arguments),b){case"width":this._renderWidth();break;case"height":this._renderHeight();break;case"showNumberColumn":this._renderHeaderNumberCell(),a.each(this._rows,function(a,b){b.datarow("option","showNumberCell",c)});break;case"singleSelect":this._renderHeaderCheckboxCell(),a.each(this._rows,function(a,b){b.datarow("option","showCheckboxCell",!c)});break;case"data":this.setValue(c);break;case"columns":this.setColumns(c)}}}),a.extend(a.webui.datarow.prototype,{_setOption:function(b,c){var d=this;switch(a.Widget.prototype._setOption.apply(d,arguments),b){case"data":this.setValue(c);break;case"showNumberCell":this._renderNumberCell();break;case"showCheckboxCell":this._renderCheckboxCell()}}})}(jQuery),function(a){a.widget("webui.simpleSelect",a.webui.input,{})}(jQuery),function(a){a.widget("ui.messageBox",{options:{},_create:function(){var b=this,c='<div class="modal"><div class="modal-dialog" style="width: 400px; margin: 200px auto;"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">提示</h4></div><div class="modal-body"><span class="glyphicon" style="vertical-align:middle; font-size:34px;"></span><span class="message-box-content" style="display: inline-block; margin-left: 2em;">sdfsdfsd</span></div><div class="modal-footer"><input type="button" class="btn btn-ok btn-default" data-dismiss="modal" value="确定" /><input type="button" class="btn btn-cancel btn-default" data-dismiss="modal" value="取消" /></div></div></div></div>',d=a(c);this._messageContent=d.find(".message-box-content"),this._messageIcon=d.find(".glyphicon"),this._btnOk=d.find(".btn-ok").click(function(){if(b._okCallback){var a=b._okCallback;b._okCallback=null,a()}}),this._btnCancel=d.find(".btn-cancel").click(function(){if(b._cancelCallback){var a=b._cancelCallback;b._cancelCallback=null,a()}}),this._modal=d.modal({show:!1,backdrop:"static"}).appendTo("body").data("bs.modal"),a("body").append(c)},info:function(a,b){this._okCallback=b,this._modal.show(),this._btnOk.focus(),this._messageContent.text(a),this._btnCancel.hide(),this._messageIcon.attr("class","").addClass("glyphicon glyphicon-info-sign text-primary")},warning:function(a,b){this._okCallback=b,this._modal.show(),this._btnOk.focus(),this._messageContent.text(a),this._btnCancel.hide(),this._messageIcon.attr("class","").addClass("glyphicon glyphicon-info-sign text-warning")},confirm:function(a,b,c){this._okCallback=b,this._cancelCallback=c,this._modal.show(),this._btnOk.focus(),this._messageContent.text(a),this._btnCancel.show(),this._messageIcon.attr("class","").addClass("glyphicon glyphicon-question-sign text-primary")},success:function(a,b){this._okCallback=b,this._modal.show(),this._btnOk.focus(),this._messageContent.text(a),this._btnCancel.hide(),this._messageIcon.attr("class","").addClass("glyphicon glyphicon-ok-sign text-success")}})}(jQuery),$(function(){$.messageBox=$("body").messageBox().data("messageBox")});